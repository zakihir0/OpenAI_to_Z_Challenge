# 衛星データ処理システム - リモートセンシング考古学

## 概要
衛星画像とリモートセンシングデータを使用したアマゾン流域の考古学遺跡検出システムです。多スペクトル解析と機械学習を組み合わせた高精度な遺跡発見手法を実装しています。

## 多スペクトル指数計算

### 1. 植生指数
- **NDVI (正規化植物指数)**: (NIR - Red) / (NIR + Red)
  - 健康な植生: 0.3-0.8
  - 考古学的異常: 0.1-0.3の範囲での変動
- **EVI (強化植生指数)**: 2.5 × (NIR - Red) / (NIR + 6×Red - 7.5×Blue + 1)
  - NDVIより高精度な植生健康状態測定
  - 土壌背景の影響を軽減

### 2. 水分・土壌指数
- **NDWI (正規化水分指数)**: (Green - NIR) / (Green + NIR)
  - 水分含有量の測定による古代水路検出
- **Iron Oxide Ratio**: Red / Blue
  - 土壌中の酸化鉄含有量による考古学層位の特定

## パターン検出アルゴリズム

### 1. エッジ検出
- **Canny エッジ検出**: 構造物の輪郭抽出
- **Sobel フィルタ**: 方向性のある特徴検出
- **Laplacian**: 微細な構造変化の検出

### 2. テンプレートマッチング
- **円形構造**: 環濠、儀式的円形広場の検出
- **長方形構造**: 居住区画、貯蔵施設の識別
- **線形特徴**: 古道、用水路、防御壁の抽出

### 3. 機械学習クラスタリング
- **K-means クラスタリング**: スペクトル特性による地域分類
- **DBSCAN**: 密度ベースの異常検出
- **ガウシアン混合モデル**: 確率的な特徴分類

## 考古学的応用技術

### 1. 植生異常検出
- **統計的外れ値検出**: Z-score による異常値特定
- **時系列解析**: 季節変動を考慮した長期トレンド分析
- **空間自己相関**: 近隣ピクセルとの関係性評価

### 2. 地形解析
- **標高差分**: LIDARデータによる微地形検出
- **傾斜解析**: 人工的な平坦化の識別
- **集水域分析**: 古代の水管理システム復元

### 3. 土壌マーク分析
- **分光シグネチャ分析**: 土壌組成の化学的変化検出
- **主成分分析 (PCA)**: 多次元スペクトルデータの次元削減
- **線形判別分析**: 考古学的土壌と自然土壌の分類

## データ処理パイプライン

### 前処理
1. **大気補正**: 大気の影響除去
2. **雲マスク**: 雲域の自動除外
3. **地形補正**: 地形による陰影効果の補正
4. **ノイズ除去**: ガウシアンフィルタによる平滑化

### 特徴抽出
1. **多スペクトル指数計算**: 各種植生・土壌指数の算出
2. **テクスチャ解析**: Gray-Level Co-occurrence Matrix (GLCM)
3. **形状特徴**: 面積、周囲長、円形度、長軸比の計算
4. **空間統計**: Moran's I による空間的自己相関

### 分類・検出
1. **教師なし学習**: クラスタリングによる候補地抽出
2. **教師あり学習**: 既知遺跡を訓練データとした分類
3. **アンサンブル手法**: 複数アルゴリズムの結果統合
4. **信頼度評価**: 検出結果の妥当性スコア算出

## 可視化・解析支援

### 1. 対話的可視化
- **多層マップ表示**: 異なる指数の重ね合わせ表示
- **時系列アニメーション**: 植生変化の時間的推移
- **3D地形モデル**: LIDARデータによる立体表示

### 2. 統計的解析
- **分布グラフ**: 各指数の度数分布とヒストグラム
- **相関分析**: 異なる指数間の関係性評価
- **ROCカーブ**: 検出精度の定量的評価

## 使用方法
```python
from satellite_data_processing import SatelliteProcessor

processor = SatelliteProcessor()
indices = processor.calculate_spectral_indices(satellite_data)
anomalies = processor.detect_vegetation_anomalies(indices)
sites = processor.detect_geometric_patterns(satellite_data)
```